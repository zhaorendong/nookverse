{
  "openapi": "3.0.3",
  "info": {
    "title": "Nookverse API",
    "description": "Nookverse 是一个家庭物品管理系统，帮助用户整理、追踪和管理家中的各种物品。",
    "version": "1.0.0",
    "contact": {
      "name": "Nookverse Team",
      "email": "support@nookverse.com"
    },
    "license": {
      "name": "MIT",
      "url": "https://opensource.org/licenses/MIT"
    }
  },
  "servers": [
    {
      "url": "http://localhost:8080",
      "description": "本地开发服务器"
    },
    {
      "url": "https://api.nookverse.com",
      "description": "生产环境服务器"
    }
  ],
  "paths": {
    "/health": {
      "get": {
        "summary": "健康检查",
        "description": "检查服务运行状态",
        "tags": ["Health"],
        "responses": {
          "200": {
            "description": "服务正常运行",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "example": "ok"
                    },
                    "message": {
                      "type": "string",
                      "example": "Nookverse service is running"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/items": {
      "post": {
        "summary": "创建物品",
        "description": "创建一个新的物品记录",
        "tags": ["Items"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateItemRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "物品创建成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "物品创建成功"
                    },
                    "data": {
                      "$ref": "#/components/schemas/ItemResponse"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      },
      "get": {
        "summary": "分页查询物品",
        "description": "根据过滤条件分页查询物品列表",
        "tags": ["Items"],
        "parameters": [
          {
            "name": "room_id",
            "in": "query",
            "description": "房间ID",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "category_id",
            "in": "query",
            "description": "分类ID",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "status",
            "in": "query",
            "description": "物品状态",
            "required": false,
            "schema": {
              "type": "string",
              "enum": ["active", "archived", "discarded", "borrowed"]
            }
          },
          {
            "name": "labels",
            "in": "query",
            "description": "标签筛选（逗号分隔）",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "page",
            "in": "query",
            "description": "页码",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 1
            }
          },
          {
            "name": "page_size",
            "in": "query",
            "description": "每页数量",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 10
            }
          },
          {
            "name": "order_by",
            "in": "query",
            "description": "排序字段",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "查询成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/ItemResponse"
                      }
                    },
                    "pagination": {
                      "$ref": "#/components/schemas/Pagination"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/api/v1/items/search": {
      "get": {
        "summary": "搜索物品",
        "description": "根据关键词搜索物品",
        "tags": ["Items"],
        "parameters": [
          {
            "name": "q",
            "in": "query",
            "description": "搜索关键词",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "page",
            "in": "query",
            "description": "页码",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 1
            }
          },
          {
            "name": "page_size",
            "in": "query",
            "description": "每页数量",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 10
            }
          }
        ],
        "responses": {
          "200": {
            "description": "搜索成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/ItemResponse"
                      }
                    },
                    "pagination": {
                      "$ref": "#/components/schemas/Pagination"
                    },
                    "query": {
                      "type": "string",
                      "description": "搜索关键词"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/api/v1/items/{itemId}": {
      "get": {
        "summary": "获取物品详情",
        "description": "根据ID获取物品详细信息",
        "tags": ["Items"],
        "parameters": [
          {
            "name": "itemId",
            "in": "path",
            "description": "物品ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/ItemResponse"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      },
      "put": {
        "summary": "更新物品",
        "description": "更新物品信息",
        "tags": ["Items"],
        "parameters": [
          {
            "name": "itemId",
            "in": "path",
            "description": "物品ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateItemRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "更新成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "物品更新成功"
                    },
                    "data": {
                      "$ref": "#/components/schemas/ItemResponse"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      },
      "delete": {
        "summary": "删除物品",
        "description": "删除指定物品",
        "tags": ["Items"],
        "parameters": [
          {
            "name": "itemId",
            "in": "path",
            "description": "物品ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "删除成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "物品删除成功"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/api/v1/items/{itemId}/move": {
      "post": {
        "summary": "移动物品",
        "description": "将物品移动到指定容器中",
        "tags": ["Items"],
        "parameters": [
          {
            "name": "itemId",
            "in": "path",
            "description": "物品ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MoveItemRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "移动成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "物品移动成功"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/api/v1/items/{itemId}/reminders": {
      "post": {
        "summary": "创建提醒",
        "description": "为物品创建提醒",
        "tags": ["Items", "Reminders"],
        "parameters": [
          {
            "name": "itemId",
            "in": "path",
            "description": "物品ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateReminderRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "提醒创建成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "提醒创建成功"
                    },
                    "data": {
                      "$ref": "#/components/schemas/ReminderResponse"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/api/v1/items/container/{containerId}/contents": {
      "get": {
        "summary": "获取容器内容",
        "description": "获取指定容器内的所有物品",
        "tags": ["Items"],
        "parameters": [
          {
            "name": "containerId",
            "in": "path",
            "description": "容器ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/ItemResponse"
                      }
                    }
                  }
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/api/v1/items/reminders/upcoming": {
      "get": {
        "summary": "获取即将到来的提醒",
        "description": "获取未来指定天数内的提醒列表",
        "tags": ["Reminders"],
        "parameters": [
          {
            "name": "days",
            "in": "query",
            "description": "天数范围（默认7天）",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 7
            }
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/ReminderResponse"
                      }
                    }
                  }
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/api/v1/items/statistics": {
      "get": {
        "summary": "获取物品统计信息",
        "description": "获取用户的物品统计信息",
        "tags": ["Items", "Statistics"],
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "$ref": "#/components/schemas/StatisticsResponse"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/api/v1/rooms/{roomId}/items": {
      "get": {
        "summary": "获取房间内物品",
        "description": "获取指定房间内的所有物品",
        "tags": ["Rooms", "Items"],
        "parameters": [
          {
            "name": "roomId",
            "in": "path",
            "description": "房间ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/ItemResponse"
                      }
                    }
                  }
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "CreateItemRequest": {
        "type": "object",
        "required": ["name", "quantity"],
        "properties": {
          "name": {
            "type": "string",
            "description": "物品名称",
            "example": "iPhone 15 Pro"
          },
          "description": {
            "type": "string",
            "description": "物品描述",
            "example": "苹果最新款手机"
          },
          "category_id": {
            "type": "string",
            "description": "分类ID"
          },
          "room_id": {
            "type": "string",
            "description": "房间ID"
          },
          "container_id": {
            "type": "string",
            "description": "容器ID"
          },
          "quantity": {
            "type": "integer",
            "description": "数量",
            "example": 1
          },
          "status": {
            "type": "string",
            "description": "物品状态",
            "enum": ["active", "archived", "discarded", "borrowed"],
            "default": "active"
          },
          "expire_date": {
            "type": "string",
            "format": "date-time",
            "description": "过期时间"
          },
          "purchase_date": {
            "type": "string",
            "format": "date-time",
            "description": "购买时间"
          },
          "price": {
            "type": "number",
            "format": "double",
            "description": "价格"
          },
          "warranty_period": {
            "type": "integer",
            "description": "保修期（月）"
          },
          "brand": {
            "type": "string",
            "description": "品牌"
          },
          "model": {
            "type": "string",
            "description": "型号"
          },
          "position": {
            "type": "object",
            "description": "位置信息",
            "additionalProperties": true
          },
          "custom_position": {
            "type": "string",
            "description": "自定义位置描述"
          },
          "attributes": {
            "type": "object",
            "description": "自定义属性",
            "additionalProperties": true
          },
          "labels": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "标签列表"
          }
        }
      },
      "UpdateItemRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "物品名称"
          },
          "description": {
            "type": "string",
            "description": "物品描述"
          },
          "category_id": {
            "type": "string",
            "description": "分类ID"
          },
          "room_id": {
            "type": "string",
            "description": "房间ID"
          },
          "container_id": {
            "type": "string",
            "description": "容器ID"
          },
          "quantity": {
            "type": "integer",
            "description": "数量"
          },
          "status": {
            "type": "string",
            "description": "物品状态",
            "enum": ["active", "archived", "discarded", "borrowed"]
          },
          "expire_date": {
            "type": "string",
            "format": "date-time",
            "description": "过期时间"
          },
          "purchase_date": {
            "type": "string",
            "format": "date-time",
            "description": "购买时间"
          },
          "price": {
            "type": "number",
            "format": "double",
            "description": "价格"
          },
          "warranty_period": {
            "type": "integer",
            "description": "保修期（月）"
          },
          "brand": {
            "type": "string",
            "description": "品牌"
          },
          "model": {
            "type": "string",
            "description": "型号"
          },
          "position": {
            "type": "object",
            "description": "位置信息",
            "additionalProperties": true
          },
          "custom_position": {
            "type": "string",
            "description": "自定义位置描述"
          },
          "attributes": {
            "type": "object",
            "description": "自定义属性",
            "additionalProperties": true
          },
          "labels": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "标签列表"
          }
        }
      },
      "ItemResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "物品ID"
          },
          "name": {
            "type": "string",
            "description": "物品名称"
          },
          "description": {
            "type": "string",
            "description": "物品描述"
          },
          "category": {
            "$ref": "#/components/schemas/CategoryResponse"
          },
          "room": {
            "$ref": "#/components/schemas/RoomResponse"
          },
          "container": {
            "$ref": "#/components/schemas/ItemResponse"
          },
          "quantity": {
            "type": "integer",
            "description": "数量"
          },
          "status": {
            "type": "string",
            "description": "物品状态",
            "enum": ["active", "archived", "discarded", "borrowed"]
          },
          "expire_date": {
            "type": "string",
            "format": "date-time",
            "description": "过期时间"
          },
          "purchase_date": {
            "type": "string",
            "format": "date-time",
            "description": "购买时间"
          },
          "price": {
            "type": "number",
            "format": "double",
            "description": "价格"
          },
          "warranty_period": {
            "type": "integer",
            "description": "保修期（月）"
          },
          "brand": {
            "type": "string",
            "description": "品牌"
          },
          "model": {
            "type": "string",
            "description": "型号"
          },
          "position": {
            "type": "object",
            "description": "位置信息",
            "additionalProperties": true
          },
          "custom_position": {
            "type": "string",
            "description": "自定义位置描述"
          },
          "attributes": {
            "type": "object",
            "description": "自定义属性",
            "additionalProperties": true
          },
          "labels": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "标签列表"
          },
          "media_files": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/MediaFileResponse"
            }
          },
          "reminders": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ReminderResponse"
            }
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "创建时间"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "更新时间"
          }
        }
      },
      "CategoryResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "分类ID"
          },
          "name": {
            "type": "string",
            "description": "分类名称"
          },
          "parent_id": {
            "type": "string",
            "description": "父分类ID"
          },
          "icon": {
            "type": "string",
            "description": "图标"
          },
          "color": {
            "type": "string",
            "description": "颜色"
          },
          "sort_order": {
            "type": "integer",
            "description": "排序"
          },
          "children": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CategoryResponse"
            }
          }
        }
      },
      "RoomResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "房间ID"
          },
          "name": {
            "type": "string",
            "description": "房间名称"
          },
          "room_type": {
            "type": "string",
            "description": "房间类型"
          },
          "floor_number": {
            "type": "integer",
            "description": "楼层号"
          },
          "area": {
            "type": "number",
            "format": "double",
            "description": "面积"
          },
          "description": {
            "type": "string",
            "description": "描述"
          }
        }
      },
      "MediaFileResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "文件ID"
          },
          "file_url": {
            "type": "string",
            "description": "文件URL"
          },
          "thumbnail_url": {
            "type": "string",
            "description": "缩略图URL"
          },
          "file_type": {
            "type": "string",
            "description": "文件类型",
            "enum": ["image", "video", "document"]
          },
          "file_size": {
            "type": "integer",
            "description": "文件大小（字节）"
          },
          "mime_type": {
            "type": "string",
            "description": "MIME类型"
          },
          "alt_text": {
            "type": "string",
            "description": "替代文本"
          },
          "sort_order": {
            "type": "integer",
            "description": "排序"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "创建时间"
          }
        }
      },
      "ReminderResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "提醒ID"
          },
          "reminder_type": {
            "type": "string",
            "description": "提醒类型",
            "enum": ["expire", "maintenance", "warranty", "custom"]
          },
          "trigger_time": {
            "type": "string",
            "format": "date-time",
            "description": "触发时间"
          },
          "message": {
            "type": "string",
            "description": "提醒消息"
          },
          "status": {
            "type": "string",
            "description": "提醒状态",
            "enum": ["pending", "sent", "completed", "cancelled"]
          },
          "notify_channels": {
            "type": "array",
            "items": {
              "type": "string",
              "enum": ["app", "email", "sms", "voice"]
            },
            "description": "通知渠道"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "创建时间"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "更新时间"
          }
        }
      },
      "MoveItemRequest": {
        "type": "object",
        "required": ["container_id"],
        "properties": {
          "container_id": {
            "type": "string",
            "description": "目标容器ID"
          }
        }
      },
      "CreateReminderRequest": {
        "type": "object",
        "required": ["reminder_type", "trigger_time", "message"],
        "properties": {
          "reminder_type": {
            "type": "string",
            "description": "提醒类型",
            "enum": ["expire", "maintenance", "warranty", "custom"]
          },
          "trigger_time": {
            "type": "string",
            "format": "date-time",
            "description": "触发时间"
          },
          "message": {
            "type": "string",
            "description": "提醒消息"
          },
          "notify_channels": {
            "type": "array",
            "items": {
              "type": "string",
              "enum": ["app", "email", "sms", "voice"]
            },
            "description": "通知渠道"
          }
        }
      },
      "Pagination": {
        "type": "object",
        "properties": {
          "total": {
            "type": "integer",
            "description": "总记录数"
          },
          "page": {
            "type": "integer",
            "description": "当前页码"
          },
          "page_size": {
            "type": "integer",
            "description": "每页记录数"
          }
        }
      },
      "StatisticsResponse": {
        "type": "object",
        "properties": {
          "total_items": {
            "type": "integer",
            "description": "物品总数"
          },
          "by_status": {
            "type": "object",
            "description": "按状态统计",
            "additionalProperties": {
              "type": "integer"
            }
          },
          "by_category": {
            "type": "object",
            "description": "按分类统计",
            "additionalProperties": {
              "type": "integer"
            }
          },
          "total_value": {
            "type": "number",
            "format": "double",
            "description": "总价值"
          },
          "expiring_soon": {
            "type": "integer",
            "description": "即将过期物品数"
          },
          "low_stock_items": {
            "type": "integer",
            "description": "低库存物品数"
          }
        }
      }
    },
    "responses": {
      "BadRequest": {
        "description": "请求参数错误",
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "properties": {
                "error": {
                  "type": "string",
                  "example": "请求参数验证失败: 具体错误信息"
                }
              }
            }
          }
        }
      },
      "Unauthorized": {
        "description": "未授权访问",
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "properties": {
                "error": {
                  "type": "string",
                  "example": "未授权访问"
                }
              }
            }
          }
        }
      },
      "NotFound": {
        "description": "资源不存在",
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "properties": {
                "error": {
                  "type": "string",
                  "example": "物品不存在: 具体错误信息"
                }
              }
            }
          }
        }
      },
      "InternalServerError": {
        "description": "服务器内部错误",
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "properties": {
                "error": {
                  "type": "string",
                  "example": "服务器内部错误: 具体错误信息"
                }
              }
            }
          }
        }
      }
    },
    "securitySchemes": {
      "BearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "JWT Token认证"
      }
    }
  },
  "tags": [
    {
      "name": "Health",
      "description": "健康检查相关接口"
    },
    {
      "name": "Items",
      "description": "物品管理相关接口"
    },
    {
      "name": "Rooms",
      "description": "房间管理相关接口"
    },
    {
      "name": "Reminders",
      "description": "提醒管理相关接口"
    },
    {
      "name": "Statistics",
      "description": "统计信息相关接口"
    }
  ]
}